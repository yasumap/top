# AGENTS.md

このファイルは、やすまっぷ（yasumap）のLPに関する意図・要件のメモです。  
実装やテキストを追加するときは、ここに書かれている思想を優先してください。必要に応じて追記・修正してください。

---

## プロジェクトの前提・世界観 🌿
- やすまっぷは、**「困りごとの大きさ」ではなく「やさしさ」を扱うプロダクト**。
- 街中で「少し座りたい」が叶う世界を広げるための取り組み。
- 使命感よりも、「あったらいいな」に寄り添うトーンを大切にする。
- LPは「説明する場所」ではなく、**想いを感じてもらう場所**。

---

## 技術スタック / 目的 🎨
- Next.js（App Router） + TypeScript + Tailwind CSS
- LPは静的サイトでOK（SSR は必須ではない）
- 役割は以下の3つ
  - ストーリーを届ける
  - 「支援したい」という気持ちを静かに後押しする
  - 「いま準備中」であることを誠実に伝える

---

## トーン＆マナー（LPの人格）😌
- やさしい／淡い／静か／落ち着き
- こちらから近づきすぎない、**半歩引いた距離感**
- 「がんばっています！」ではなく  
  👉「こんな取り組みをしています」という佇まい
- 説得・煽りはNG
- 共感を強制しない
- 「困っている人の気持ちを利用する」表現は避ける

---

## デザイン方針 🪑
- 背景は以下の画像を主役として使用  
  - `public/夕日のベンチ_LP用背景画像.png`
- できる限り手を加えない（**写真そのものの空気感を優先**）
- 強い網掛け・暗いオーバーレイは使わない  
  👉 必要な場合のみ、ごく薄く
- 1カラム構成
- 余白は「贅沢すぎるかな？」と感じるくらいでちょうど良い
- 文字は白基調、背景パネルは基本的に使わない
- 囲み枠・カードUIは原則不採用（どうしても必要な場合のみごく薄く）

---

## アニメーション方針 ✨
- フェード主体・動きは最小限
- **「動いている」ではなく「現れる」感覚**
- スクロールに応じて
  - 表示：フェードイン
  - 戻る：フェードアウト
- 速すぎるトランジションは使わない
- 見せたいのは演出ではなく「文章」

---

## コピー / 文言ポリシー 📝
- 時間帯を限定する語（例：夕暮れ・夜・朝焼け）は使わない
- 「かわいそう」「弱者」などの上下関係を連想させる言葉は使わない
- 感情を煽らない
- **寄付＝偉い、というメッセージは絶対に出さない**
- 「応援したければどうぞ」という余白を残す
- 使う言葉は短く、あいまい過ぎず、あたたかく

---

## ヒーローコピーの方針（固定）🧭
- 2行構成  
例：
> 街角に、やさしい  
> ベンチの地図を。

- 説明文は短文1つまで
- 「プロダクト名を叫ばない」

---

## ストーリー表示に関する要件 📚
- これまで議論して作ってきた**正式ストーリー文を使用**
- 1〜2行単位で分割してフェード表示
- 改行の位置も含めて「読ませ方」を設計する
- 長文を一気に読ませない
- **読めるのではなく、染みるように読む感覚**

---

## セクション構成 🗺️
1. ヒーロー  
   - 背景画像  
   - キャッチコピー  
   - 短い説明文
2. スクロールストーリー  
   - 1–2行単位で段階的に表示
3. フッター  
   - やすまっぷロゴ or テキスト  
   - 「現在開発中・準備中です」の一文  
   - 必要なら支援導線（強制しない表現で）

---

## 寄付・支援に関する扱い 💗
- 「お金をください」とは書かない
- 「応援したいと思った方へ」という**任意性を強調**
- 行動を責めない・選択を尊重
- 1円でも嬉しい、というメッセージは維持
- 見返りやリターンの強調はしない

---

## 実装メモ 🛠
- 画像  
  - `public/夕日のベンチ_LP用背景画像.png`
- ファビコン  
  - `public/椅子_ファビコン用.png` を  
    - `app/icon.png`  
    - `app/apple-icon.png` に配置
- アニメーション  
  - IntersectionObserver で isIntersecting に応じて表示/非表示
- SEO  
  - 激しいSEO対策は不要  
  - タイトルとmeta descriptionのみあっさり入れる
- アクセシビリティ  
  - コントラスト確保  
  - 代替テキストは簡潔に
  - PCでもスマホでも同じように快適に見られるように実装する

---

## LPで「やらないことリスト」🚫
- ギラギラしたバナー
- 大量のCTAボタン
- 強いセールスコピー
- 課金導線の誘導
- 「かわいそうだから支援して」の表現
- 過剰に明るいテンション

---

## これは最後に 💬
やすまっぷのLPは、  
**プロダクトの広告ではなく、「思想の入口」。**

読んだ人の心が少しだけ柔らかくなること、  
「いいな」と思ってもらえることをゴールにします。

---

## ありがとうページ / アンケートの現状整理 ✅
### できるようになっていること
- `/thanks?t=トークン` でのみ閲覧できる（トークンがない/無効なら表示しない）。
- アンケートは**1トークンにつき1回のみ回答**できる。
- 回答後もページは見られ、**回答内容が表示される**。
- 回答内容はSupabaseに保存される。
- 支援タイプメッセージは「支援理由（motive）」に応じて出し分け。

### まだできておらず、今後実装すること
- `/admin/tokens` 管理ページの運用開始（Basic認証で保護）。
- トークン発行の運用フローをチームで決定（手動発行＋手動送付が前提）。

### まだできておらず、予定も未確定のこと
- OFUSEとのWebhook連携（自動トークン発行・自動案内）。
- 自動メール送信/通知の仕組み。
- 管理画面での集計・分析ダッシュボード。

---

## トークン運用（手動前提）
### 基本方針
- **トークンは自分たちのシステムで発行**する。
- OFUSEの自動連携がない場合、**手動でURLを送る**運用とする。
- 1支援につき1トークン（再支援は新トークン）。

### トークン発行の仕組み
- `/admin/tokens` でボタン1つで発行できる。
- Basic認証で保護（環境変数に設定したユーザー名/パスワード）。
- 発行済みトークンは一覧表示・コピー可能。

---

## 環境変数（必須）
- `SUPABASE_URL`  
  - Supabaseの Project Settings → API → Project URL。
- `SUPABASE_SERVICE_ROLE_KEY`  
  - Supabaseの Project Settings → API → service_role の secret key。
  - **公開厳禁**。
- `BASIC_AUTH_USER` / `BASIC_AUTH_PASSWORD`  
  - 管理ページのBasic認証。**自分たちで決める**。

---

## 使い方（管理ページの運用）
1. `.env.local` に上記4つを設定する。
2. `npm run dev` で起動。
3. `http://localhost:3000/admin/tokens` にアクセス。
4. Basic認証でログイン。
5. 「トークンを発行する」ボタンを押す。
6. 発行されたURLを支援者に送る。

---

## 次にやること（提案）
1. **SupabaseのOrganizationに参加**  
   - 既存プロジェクトが見える状態にする（招待が必要）。
2. **環境変数の設定を完了**  
   - `SUPABASE_SERVICE_ROLE_KEY` を取得して `.env.local` に設定。
3. **管理ページの運用リハーサル**  
   - 1件トークン発行 → URL送付 → 回答保存まで一連の流れを試す。
4. （余裕が出たら）**メッセージ文言の調整**  
   - 支援タイプメッセージの出し分けを最適化する。
